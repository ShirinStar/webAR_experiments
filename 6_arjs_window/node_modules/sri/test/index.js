const sri = require('../index');
const fs = require('fs');
const path = require('path');

const expected = 'sha384-J5Dqvq3qATcLhtSkdquOAC/pjNfj8c+oSP55YxlmhCRpAmMfdBuTMJZodkLMhw2r';

fs.readFile(path.join(__dirname, '../index.js'), 'utf8', function(err, data) {

  const sriString = sri.getSRIString(data);

  if (sriString !== expected) {
    throw Error(`Wrong hash: ${sriString}`);
  } else {
    console.log(`Passed: ${sriString}`);
  }
});
